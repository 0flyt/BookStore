<UserControl x:Class="BookStore.Presentation.Views.Books.BookFormView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BookStore.Presentation.Views.Books"
        mc:Ignorable="d"
        Height="450" Width="800">
    
    
    <StackPanel Margin="20">
        <TextBlock Text="Titel"/>
        <TextBox Text="{Binding Title}" />

        <TextBlock Text="Författare" FontWeight="Bold" />
        <ComboBox
            ItemsSource="{Binding AllAuthors}"
            SelectedItem="{Binding SelectedAuthor}"
            DisplayMemberPath="FullName"
            Width="250" />

        <Button
            Content="Lägg till författare"
            Command="{Binding AddAuthorCommand}"
            Margin="0,5,0,10" />

        <ItemsControl ItemsSource="{Binding SelectedAuthors}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding FullName}" />
                        <Button
                            Content="✕"
                            Command="{Binding DataContext.RemoveAuthorCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                            CommandParameter="{Binding}"
                            Margin="10,0,0,0" />
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>



        <TextBlock Text="ISBN"/>
        <TextBox Text="{Binding Isbn}" />

        <TextBlock Text="Pris"/>
        <TextBox Text="{Binding Price}" />

        <TextBlock Text="Språk"/>
        <TextBox Text="{Binding Language}" />

        <TextBlock Text="Utgivningsår"/>
        <TextBox Text="{Binding ReleaseYear}" />

        <TextBlock Text="Genre"/>
        <ComboBox 
            ItemsSource="{Binding Genres}"
            SelectedItem="{Binding SelectedGenre}"
            DisplayMemberPath="Name"/>

        <TextBlock Text="Format"/>
        <ComboBox 
            ItemsSource="{Binding Formats}"
            SelectedItem="{Binding SelectedFormat}"
            DisplayMemberPath="Name"/>

        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Avbryt" Command="{Binding CancelCommand}" />
            <Button Content="Spara" Command="{Binding SaveCommand}" />
        </StackPanel>
    </StackPanel>
</UserControl>
